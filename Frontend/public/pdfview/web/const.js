/* Basic Config */
const BASE_SERVER_URL = "https://pdf-vision.com";
const BASE_URL = "https://pdf-vision.com:8081";
// const BASE_SERVER_URL = "https://127.0.0.1";
// const BASE_URL = "https://127.0.0.1:8081";
const USERNAME = localStorage.getItem('username');

/*
isEditing: true: Form Data Editing Mode
isEditing: false: Form Data Inserting Mode
 */
let isEditing = false;
let isMove = false;

/* All Storages for saving state */

let comment_storage = [];
let text_storage = [];
let font_storage = [];
let form_storage = [];
let history_storage = [];

/* All Constants for form elements to identify each item */

const CHECKBOX = 1,
    RADIO = 2,
    TEXTFIELD = 3,
    COMBOBOX = 4,
    LIST = 5,
    BUTTON = 6,
    TEXT_CONTENT = 7,
    DATE = 8,
    COMMENT = 9,
    SIGNATURE = 10,
    SHAPE = 11,
    PHOTO = 12;
    NUMBERFIELD = 13;

let isCheckbox = false,
    isRadioButton = false,
    isTextField = false,
    isCombo = false,
    isList = false,
    isButton = false,
    isDate = false,
    isSignature = false,
    isPhoto = false,
    isNumberField = false;

/* All Constants for option panal ids of each form elements */

const CHECKBOX_OPTION = "checkbox-option";
const RADIO_OPTION = "radio-button-option";
const TEXTFIELD_OPTION = "text-field-option";
const COMBOBOX_OPTION = "combo-option";
const LIST_OPTION = "list-option";
const BUTTON_OPTION = "button-field-option";
const TEXT_CONTENT_OPTION = "text-content-option";
const DATE_OPTION = "date-option";
const SIGNATURE_OPTION = "signature-creator";
const PHOTO_OPTION = "photo-creator";
const NUMBERFIELD_OPTION = "number-field-option";

const optionIdArray = [CHECKBOX_OPTION, RADIO_OPTION, TEXTFIELD_OPTION, COMBOBOX_OPTION, LIST_OPTION, BUTTON_OPTION, TEXT_CONTENT_OPTION, DATE_OPTION, NUMBERFIELD_OPTION];

const checkboxOption = document.getElementById(CHECKBOX_OPTION);
const radioOption = document.getElementById(RADIO_OPTION);
const textFieldOption = document.getElementById(TEXTFIELD_OPTION);
const comboOption = document.getElementById(COMBOBOX_OPTION);
const listOption = document.getElementById(LIST_OPTION);
const buttonOption = document.getElementById(BUTTON_OPTION);
const dateOption = document.getElementById(DATE_OPTION);
const textContentOption = document.getElementById(TEXT_CONTENT_OPTION);
const photoOption = document.getElementById(PHOTO_OPTION);
const numberFieldOption = document.getElementById(NUMBERFIELD_OPTION);

/* Elements for calling main toolbox of right pane */

const viewer = document.getElementById("viewer");
const sidebar = document.querySelector(".right-sidebar");

/* Elements for submitting document by link */
const shareDocumentButton = document.getElementById("shareDocument");
const submitDocumentButton = document.getElementById("submitDocument");
const showHistoryButton = document.getElementById("showHistory");
const addCommentButton = document.getElementById("add_comment_mode");
const searchFormButton = document.getElementById("search-form");

let isClickOutForm = false;
let gridColorPicker;
let checkboxBackgroundColorPickerInitialized = false;
let radioBackgroundColorPickerInitialized = false;
let textBackgroundColorPickerInitialized = false;
let textBorderColorPickerInitialized = false;
let textFontColorPickerInitialized = false;
let comboBackgroundColorPickerInitialized = false;
let comboBorderColorPickerInitialized = false;
let comboFontColorPickerInitialized = false;
let listBackgroundColorPickerInitialized = false;
let listBorderColorPickerInitialized = false;
let listFontColorPickerInitialized = false;
let signatureBackgroundColorPickerInitialized = false;
let signatureBorderColorPickerInitialized = false;
let signaturedrawColorPickerInitialized = false;
let signatureTypeColorPickerInitialized = false;
let photoBackgroundColorPickerInitialized = false;
let photoBorderColorPickerInitialized = false;
let dateBackgroundColorPickerInitialized = false;
let dateBorderColorPickerInitialized = false;
let dateFontColorPickerInitialized = false;
let buttonBackgroundColorPickerInitialized = false;
let buttonBorderColorPickerInitialized = false;
let buttonFontColorPickerInitialized = false;
let textFieldFontColorPickerInitialized = false;

let clientName = '';
let clientEmail = '';
let isSubmit = false;
let requestId = ''; // This is an unique id for each request generated by uuid on backend side.

/* Constants for setting z-index value */

const standardZIndex = 100;
const selectedZIndex = 150;

/* Variables for text annotation - not text form field */
let textContentSize = { x: 0, y: 0 }; // Container size of text annotation.

/* Variables for ShowHistoryBar */

const showHistoryBar = document.getElementById("show-history");

let leftSideBarOpened = false;
let showHistoryBarOpened = false;

let historyId = 0;

let current_history_id = 0;

let isOpenSubmitDocument = false;
let baseId = 0;
let selectedProfileSignature = null;

let isAddCommentModeOn = false;
let isTextModeOn = false;
let isDrawingShape = false;

const saveDraftButton = document.getElementById("saveDraftButton");
const urlParams = new URLSearchParams(window.location.search);
const initialId = urlParams.get('id');
const isDraft = urlParams.get('draft');
const isOpenEmailPdf = parent.window.location.href.indexOf('openpdf') > -1;